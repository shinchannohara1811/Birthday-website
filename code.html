<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Countdown with Scanner</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        #timer { font-size: 2em; margin: 20px; }
        .cake { width: 200px; height: 200px; background: url('https://example.com/cake.png') no-repeat center; margin: 20px auto; } /* Replace with actual cake image */
        #scanner { margin: 20px; }
        video { width: 300px; height: 300px; }
    </style>
</head>
<body>
    <h1>Birthday Countdown</h1>
    <div id="timer"></div>
    <div class="cake"></div>
    <button onclick="cutCake()">Cut the Cake</button>
    
    <h2>Scan a QR Code for a Birthday Message</h2>
    <div id="scanner">
        <video id="preview"></video>
        <div id="result"></div>
    </div>
    <button onclick="startScanner()">Start Scanner</button>
    <button onclick="stopScanner()">Stop Scanner</button>

    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
    <script>
        // Countdown timer (set to her birthday - adjust date)
        const birthday = new Date('2024-12-25T00:00:00'); // Replace with her actual birthday (YYYY-MM-DD)

        function updateCountdown() {
            const now = new Date();
            const diff = birthday - now;
            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                document.getElementById('timer').innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            } else {
                document.getElementById('timer').innerHTML = "It's your birthday! ðŸŽ‰";
            }
        }

        setInterval(updateCountdown, 1000);
        updateCountdown();

        // Cake cutting animation
        function cutCake() {
            const cake = document.querySelector('.cake');
            cake.style.animation = 'fadeOut 2s forwards';
        }

        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes fadeOut {
                to { opacity: 0; transform: scale(0.8); }
            }
        `;
        document.head.appendChild(style);

        // QR Code Scanner
        let scanner = null;

        function startScanner() {
            scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
            scanner.addListener('scan', function (content) {
                document.getElementById('result').innerHTML = 'Scanned: ' + content;
                // You can add logic here to handle the scanned content, e.g., display a birthday message
            });
            Instascan.Camera.getCameras().then(function (cameras) {
                if (cameras.length > 0) {
                    scanner.start(cameras[0]);
                } else {
                    console.error('No cameras found.');
                }
            }).catch(function (e) {
                console.error(e);
            });
        }

        function stopScanner() {
            if (scanner) {
                scanner.stop();
            }
        }
    </script>
</body>
</html>
